# chart 页面

## 页面功能
`chart.js` 页面用于展示用户的账单类型数据统计。用户可以选择账单类型（支出或收入）和日期范围，以图表形式查看相应的数据。

## 关键功能

### 页面初始化
- 根据传入的参数（如类型ID、账单类型、年份和月份）设置页面状态。
- 若未传入参数，则默认展示当前月份的支出或收入数据。

### 数据获取
- 使用 `getChartData` 云函数获取指定类型和日期范围内的账单数据。
- 统计并展示各账单类型的总金额。

### 日期范围选择
- 用户可以选择按月份或按年份查看数据。
- 当选择月份时，可以查看当前年份的特定月份的支出或收入数据。
- 当选择年份时，可以查看全年数据。

### 账单类型切换
- 用户可以通过下拉框切换账单类型（支出或收入），页面将自动更新显示相应的数据。

### 图表详情跳转
- 用户可以点击图表中的具体数据项，跳转到 `chart` 页面查看该账单类型的详细信息。

## 云函数

### getChartData
- 此云函数负责从数据库中查询并聚合账单数据，返回特定条件下的账单类型总金额统计。

#### 主要数据库操作
- 使用 MongoDB 聚合框架，根据用户的 OpenID、账单类型、年份和月份范围筛选账单数据。
- 按账单类型分组并计算各类型的总金额。

### getChartDetailData
- 此云函数用于获取特定账单类型的详细数据，根据用户的选择返回指定时间范围内的账单记录。

#### 主要数据库操作
- 根据账单月份、年份和类型ID进行查询。
- 使用 `orderBy` 对结果按月份降序排列，返回用户的账单详情。

