# addBook 页面 README 文档

## 页面概述

`addBook` 页面用于添加或编辑账单记录，包括支出和收入类型。用户可以选择账单类型、输入金额、选择计划和备注，并能够选择日期。

## 页面结构

该页面的主要功能包括：

- **账单类型选择**：用户可以选择支出或收入类型。
- **金额输入**：用户可以输入账单金额，支持小数。
- **备注输入**：用户可以输入与账单相关的备注。
- **计划选择**：用户可以选择与账单相关的计划。
- **日期选择**：用户可以选择账单的日期。

## 关键功能

### 1. 初始化数据

- **获取账单类型**：使用 `getBookType` 云函数获取可用的账单类型。
- **获取计划列表**：使用 `getPlanList` 云函数获取用户的计划列表。
- **获取账单详情**：使用 `getBookDetail` 云函数获取指定账单记录的详细信息（用于编辑）。

### 2. 数据处理

- **输入金额**：支持用户输入金额并进行格式化处理。
- **选择账单类型**：根据用户选择的类型更新相关备注和状态。
- **选择日期**：用户可以通过日期选择器选择账单日期。

### 3. 保存账单

- **保存账单记录**：用户填写完所有信息后，点击保存按钮，调用 `addBook` 或 `editBook` 云函数，根据是否有 `bookId` 判断是添加新账单还是编辑现有账单。

## 云函数说明

### 1. `getBookType.js`

- **功能**：获取用户的账单类型列表。
- **输入参数**：
  - `type`: 账单类型（支出或收入）。
- **返回值**：用户的账单类型数据。

### 2. `getPlanList.js`

- **功能**：获取用户的计划列表及相关统计信息。
- **输入参数**：
  - `type`: 计划类型（支出或收入）。
- **返回值**：用户的计划列表及每个计划的总金额。

### 3. `getBookDetail.js`

- **功能**：获取指定账单记录的详细信息。
- **输入参数**：
  - `id`: 账单记录的唯一标识符。
- **返回值**：指定账单的详细信息。

## 页面交互

- 用户进入页面后，首先会加载账单类型和计划列表。
- 用户可以切换账单类型，输入金额，选择计划和备注，并选择日期。
- 点击保存后，系统会调用相应的云函数进行数据处理。

## 注意事项

- 确保在调用云函数时，用户已登录并授权。
- 用户输入金额时，需进行有效性检查，确保金额为有效数字。

